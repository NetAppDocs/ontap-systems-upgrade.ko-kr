---
sidebar: sidebar 
permalink: upgrade-arl-manual/arl_upgrade_workflow.html 
keywords: upgrade workflow, procedure steps, stages 
summary: ONTAP 9.7 이하를 실행하는 컨트롤러 쌍에 대한 수동 ARL 업그레이드 절차가 어떻게 작동하는지 이해합니다. 
---
= ARL 업그레이드 워크플로
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ARL을 사용하여 노드를 업그레이드하기 전에 절차가 어떻게 작동하는지 이해해야 합니다. 이 문서에서는 여러 단계로 절차를 세분화하여 설명합니다.



== 노드 쌍을 업그레이드합니다

노드 쌍을 업그레이드하려면 원래 노드를 준비한 다음 원래 노드와 새 노드 모두에서 일련의 단계를 수행해야 합니다. 그런 다음 원래 노드를 서비스 해제할 수 있습니다.



== ARL 업그레이드 시퀀스 개요

이 절차를 수행하는 동안, 원래 컨트롤러 하드웨어를 교체 컨트롤러 하드웨어로 한 번에 하나씩 업그레이드하여 HA 쌍 구성을 활용하여 루트 이외의 애그리게이트에 대한 소유권을 재배치합니다. 모든 비루트 애그리게이트에는 두 개의 재배치가 수행되어 마지막 대상에 도달해야 합니다. 이것이 올바른 업그레이드 노드입니다.

각 집합에는 홈 소유자와 현재 소유자가 있습니다. 홈 소유자는 애그리게이트의 실제 소유자이며 현재 소유자는 임시 소유자입니다.

다음 그림에서는 절차의 단계를 보여 줍니다. 굵고 연한 회색 화살표는 애그리게이트의 재배치와 LIF의 이동을 나타내고, 더 얇은 검은색 화살표는 원래 노드의 제거를 나타냅니다. 더 작은 컨트롤러 이미지는 원래 노드를 나타내고 더 큰 컨트롤러 이미지는 새 노드를 나타냅니다.

image:arl_upgrade_manual_image1.PNG["ARL 절차의 단계를 보여 주는 그림"]

다음 표에서는 각 단계에서 수행하는 상위 수준의 작업과 단계 종료 시 총 소유권의 상태를 설명합니다. 자세한 단계는 절차의 뒷부분에서 제공됩니다.

[cols="35,65"]
|===
| 단계 | 단계 


| link:stage_1_index.html["1단계: 업그레이드 준비"]  a| 
. 컨트롤러에 내부 디스크 드라이브에 Aggregate가 있는지 확인합니다.
+
이 단계는 내장 디스크 드라이브가 있는 컨트롤러에서 업그레이드하는 경우에만 필요합니다.

. 업그레이드할 노드를 준비합니다.
. 스토리지 암호화용 디스크를 다시 입력하다
+
이 작업은 자체 암호화 드라이브가 있는 시스템에서 업그레이드하는 경우에만 필요합니다.

. 클러스터의 SnapMirror 관계 상태를 확인하고 클러스터 간의 모든 관계를 중지합니다.
. netboot를 준비합니다.


1단계 종료 시 소유권 집계:

* 노드 1은 노드 1 애그리게이트의 홈 소유자이며 현재 소유입니다.
* 노드 2는 노드 2 애그리게이트의 홈 소유자이며 현재 소유입니다.




| link:stage_2_index.html["2단계: 노드1을 폐기합니다"]  a| 
. 노드 1에서 노드 2로 비루트 애그리게이트를 재배치합니다.
. 노드 1이 소유한 비 SAN 데이터 LIF를 노드 2로 이동합니다.
. 노드1 정보를 기록합니다.
. 장애가 발생하거나 거부권을 행사한 Aggregate를 재배치합니다.
. 노드1을 폐기합니다.


2단계 종료 시 소유권 집계:

* 노드1은 노드1 애그리게이트의 홈 소유자입니다.
* 노드 2는 노드 1 애그리게이트의 현재 소유자입니다.
* 노드 2는 노드 2 애그리게이트의 홈 소유자이며 현재 소유입니다.




| link:stage_3_index.html["3단계: 노드 3을 설치하고 부팅합니다"]  a| 
. 노드3을 설치하고 부팅합니다.
. 노드 3에 UTA/UTA2 구성을 설정합니다.
. 노드 1의 포트를 노드 3으로 매핑합니다.
. 노드3 설치를 확인합니다.
. 노드 1이 소유한 비 SAN 데이터 LIF를 노드 2에서 노드 3으로 이동하고 노드 3의 SNA LIF를 확인합니다.
. 노드 2에서 노드 3으로 비루트 애그리게이트를 재배치합니다.
. 노드 2가 소유한 non-SAN 데이터 LIF를 노드 3으로 이동합니다.


3단계 종료 시 소유권 집계:

* 노드 2는 노드 2 애그리게이트의 홈 소유주이지만 현재 소유주는 아닙니다.
* Node3는 노드 1에 원래 속하는 애그리게이트의 홈 소유자 및 현재 소유자입니다.
* 노드 2는 노드 2에 속하는 애그리게이트의 홈 소유자이며 현재 소유주이지만 홈 소유주에서는 그렇지 않습니다.




| link:stage_4_index.html["4단계: 노드2를 폐기합니다"]  a| 
. 노드2 정보를 기록합니다.
. 노드2를 폐기합니다.


집계 소유권은 변경되지 않습니다.



| link:stage_5_index.html["5단계: 노드 4를 설치하고 부팅합니다"]  a| 
. 노드 4를 설치하고 부팅합니다.
. 노드 4에 UTA/UTA2 구성을 설정합니다.
. 노드 2의 포트를 노드 4로 매핑합니다.
. 노드 4가 성공적으로 설치되었는지 확인합니다.
. 노드 3에서 노드 4로 SAN이 아닌 데이터 LIF를 이동하고 노드 4의 SNA LIF를 확인합니다.
. 노드 2의 루트 이외의 애그리게이트를 노드 3에서 노드 4로 이동합니다.


5단계 종료 시 소유권 집계:

* Node3는 노드 1에 원래 속해 있는 애그리게이트의 홈 소유자 및 현재 소유자입니다.
* Node4는 노드 2에 원래 속해 있는 애그리게이트의 홈 소유자이며 현재 소유자입니다.




| link:stage_6_index.html["6단계: 업그레이드를 완료합니다"]  a| 
. 새 컨트롤러가 올바르게 설정되었는지 확인합니다.
. 새 노드에서 스토리지 암호화 설정
+
이 작업은 자체 암호화 드라이브가 있는 시스템으로 업그레이드하는 경우에만 필요합니다.

. 기존 시스템을 폐기합니다.
. NetApp SnapMirror 관계를 재개합니다.
+
* 참고: * 스토리지 가상 시스템(SVM) 재해 복구 업데이트는 할당된 일정에 따라 중단되지 않습니다.



집계 소유권은 변경되지 않습니다.

|===